{"ast":null,"code":"// src/pages/Transaction.js\nimport React,{useState,useEffect}from\"react\";import{useLocation}from\"react-router-dom\";import CryptoJS from\"crypto-js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Transaction(){const location=useLocation();const[txnStatus,setTxnStatus]=useState(null);const[error,setError]=useState(null);useEffect(()=>{const query=new URLSearchParams(location.search);const respData=query.get(\"respData\");const AuthID=query.get(\"AuthID\");const AggRefNo=query.get(\"AggRefNo\");if(!respData){setError(\"No response data received.\");return;}try{// üîë Full AuthKey as 256-bit key\nconst authKey=\"Qv0rg4oN8cS9sm6PS3rr6fu7MN2FB0Oo\";const key=CryptoJS.enc.Utf8.parse(authKey);// 32 bytes for AES-256\n// üß± First 16 characters of AuthKey as IV\nconst ivString=authKey.substring(0,16);// \"Qv0rg4oN8cS9sm6P\"\nconst iv=CryptoJS.enc.Utf8.parse(ivString);// 16 bytes for IV\n// üì¶ Decrypt using AES-256-CBC\nconst decrypted=CryptoJS.AES.decrypt(respData,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});const plainText=decrypted.toString(CryptoJS.enc.Utf8);if(!plainText){throw new Error(\"Decryption failed - invalid or corrupted data\");}// ‚úÖ Successfully decrypted!\nconst parsed=JSON.parse(plainText);console.log(\"‚úÖ Decrypted Transaction:\",parsed);setTxnStatus(parsed);// Log other fields (to avoid ESLint warnings)\nconsole.log(\"AuthID:\",AuthID);console.log(\"AggRefNo:\",AggRefNo);}catch(err){console.error(\"‚ùå Decryption error:\",err);setError(`Failed to decrypt: ${err.message}`);}console.log(\"‚úÖ Transaction page loaded\");},[location.search]);return/*#__PURE__*/_jsxs(\"div\",{style:{fontFamily:'Arial, sans-serif',padding:'20px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Transaction Result\"}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'red',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error]}),txnStatus?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Status: \",txnStatus.payStatus===\"Ok\"?\"‚úÖ Success\":\"‚ùå Failed\"]}),/*#__PURE__*/_jsx(\"pre\",{style:{textAlign:'left',display:'inline-block',margin:'0 auto',padding:'10px',background:'#f5f5f5',borderRadius:'5px',whiteSpace:'pre-wrap',fontSize:'14px'},children:JSON.stringify(txnStatus,null,2)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",style:{marginTop:'20px',display:'block'},children:\"\\u2190 Back Home\"})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDD10 Decrypting transaction...\"})]});}export default Transaction;","map":{"version":3,"names":["React","useState","useEffect","useLocation","CryptoJS","jsx","_jsx","jsxs","_jsxs","Transaction","location","txnStatus","setTxnStatus","error","setError","query","URLSearchParams","search","respData","get","AuthID","AggRefNo","authKey","key","enc","Utf8","parse","ivString","substring","iv","decrypted","AES","decrypt","mode","CBC","padding","pad","Pkcs7","plainText","toString","Error","parsed","JSON","console","log","err","message","style","fontFamily","textAlign","children","color","marginBottom","payStatus","display","margin","background","borderRadius","whiteSpace","fontSize","stringify","href","marginTop"],"sources":["C:/Users/Lenovo/Desktop/midpay/client/src/pages/Transaction.js"],"sourcesContent":["// src/pages/Transaction.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport CryptoJS from \"crypto-js\";\r\n\r\nfunction Transaction() {\r\n  const location = useLocation();\r\n  const [txnStatus, setTxnStatus] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const query = new URLSearchParams(location.search);\r\n    const respData = query.get(\"respData\");\r\n    const AuthID = query.get(\"AuthID\");\r\n    const AggRefNo = query.get(\"AggRefNo\");\r\n\r\n    if (!respData) {\r\n      setError(\"No response data received.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // üîë Full AuthKey as 256-bit key\r\n      const authKey = \"Qv0rg4oN8cS9sm6PS3rr6fu7MN2FB0Oo\";\r\n      const key = CryptoJS.enc.Utf8.parse(authKey); // 32 bytes for AES-256\r\n\r\n      // üß± First 16 characters of AuthKey as IV\r\n      const ivString = authKey.substring(0, 16); // \"Qv0rg4oN8cS9sm6P\"\r\n      const iv = CryptoJS.enc.Utf8.parse(ivString); // 16 bytes for IV\r\n\r\n      // üì¶ Decrypt using AES-256-CBC\r\n      const decrypted = CryptoJS.AES.decrypt(respData, key, {\r\n        iv: iv,\r\n        mode: CryptoJS.mode.CBC,\r\n        padding: CryptoJS.pad.Pkcs7,\r\n      });\r\n\r\n      const plainText = decrypted.toString(CryptoJS.enc.Utf8);\r\n\r\n      if (!plainText) {\r\n        throw new Error(\"Decryption failed - invalid or corrupted data\");\r\n      }\r\n\r\n      // ‚úÖ Successfully decrypted!\r\n      const parsed = JSON.parse(plainText);\r\n      console.log(\"‚úÖ Decrypted Transaction:\", parsed);\r\n      setTxnStatus(parsed);\r\n\r\n      // Log other fields (to avoid ESLint warnings)\r\n      console.log(\"AuthID:\", AuthID);\r\n      console.log(\"AggRefNo:\", AggRefNo);\r\n\r\n    } catch (err) {\r\n      console.error(\"‚ùå Decryption error:\", err);\r\n      setError(`Failed to decrypt: ${err.message}`);\r\n    }\r\n    console.log(\"‚úÖ Transaction page loaded\");\r\n  }, [location.search]);\r\n  \r\n\r\n  return (\r\n    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px', textAlign: 'center' }}>\r\n      <h2>Transaction Result</h2>\r\n\r\n      {error && (\r\n        <div style={{ color: 'red', marginBottom: '20px' }}>\r\n          <strong>Error:</strong> {error}\r\n        </div>\r\n      )}\r\n\r\n      {txnStatus ? (\r\n        <div>\r\n          <h3>Status: {txnStatus.payStatus === \"Ok\" ? \"‚úÖ Success\" : \"‚ùå Failed\"}</h3>\r\n          <pre style={{ \r\n            textAlign: 'left', \r\n            display: 'inline-block', \r\n            margin: '0 auto', \r\n            padding: '10px', \r\n            background: '#f5f5f5', \r\n            borderRadius: '5px', \r\n            whiteSpace: 'pre-wrap',\r\n            fontSize: '14px'\r\n          }}>\r\n            {JSON.stringify(txnStatus, null, 2)}\r\n          </pre>\r\n          <br />\r\n          <a href=\"/\" style={{ marginTop: '20px', display: 'block' }}>‚Üê Back Home</a>\r\n        </div>\r\n      ) : (\r\n        <p>üîê Decrypting transaction...</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Transaction;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}